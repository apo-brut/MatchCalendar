<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="style.css"> 
    <link rel="stylesheet" href="jquery-ui.css">
</head>

<body>
    <main>
        <header class="header">
            <h1 class="weekControls">Calendar</h1>
            <div >
                <i id="prevWeekBtn" class="fas fa-angle-double-left"></i>
                <span id="weekDisplay">
                    <span id="weekStartDisplay"></span>
                    <span id="weekEndDisplay"></span>
                </span>            
                <i id="nextWeekBtn" class="fas fa-angle-double-right"></i>
    
            </div>
            <div class="generalControls">
                <i id="addButton" class="fas fa-plus"></i>
                <i id="trashButton" class="fas fa-trash-alt"></i>
                <i id="addUserButton" class="fas fa-user"></i>
            </div>
        </header>
        <div style="display: flex">
            <div style="width: 272; border-bottom: 1px solid #cecece; margin-left: 10px; margin-right: 10px;">
                <div style="height: 100%;">
                    <div style="height: 50%; border: 1px solid #cecece; border-left: none; ">
                        <div id="datePickerSidebar"></div>
                    </div>
                    
                    <div id="lstLinkedCalendar" class="linkedCalendarDiv"></div>
                </div>
            </div>
            <div style="flex: 1;">
                <section id="calendar">
                    <div class="dayTime">
                    </div>
                    <div data-name="Monday" data-dayIndex="0" class="day">
                    </div>
                    <div data-name="Tuesday" data-dayIndex="1" class="day">
                    </div>
                    <div data-name="Wednesday" data-dayIndex="2" class="day">
                    </div>
                    <div data-name="Thursday" data-dayIndex="3" class="day">
                    </div>
                    <div data-name="Friday" data-dayIndex="4" class="day">
                    </div>
                    <div data-name="Saturday" data-dayIndex="5" class="day">
                    </div>
                    <div data-name="Sunday" data-dayIndex="6" class="day">
                    </div>
                </section>
            </div>
        </div>
    
        <form id="eventModal" class="modal">
            <span class="close" id="cancelButtonEvent">&times;</span>
            <h2 id="modalTitle">
            </h2>
            <label class="descriptor" for="title">Title</label>
            <div>
                <input required type="text" id="eventTitle" name="title" class="shortInput"></input>
            </div>
            <label class="descriptor" for="date">Date</label>
            <div>
                <input required type="date" id="eventDate" name="date" class="shortInput"></input>
            </div>
            <label class="descriptor" for="time">Time</label>
            <div>
                <input required type="time" id="eventStart" name="time" class="shortInput"></input>
                -<input required type="time" id="eventEnd" name="time" class="shortInput"></input>
            </div>
            
            <label for="description">
                Description
            </label>
            <div>
                <textarea id="eventDescription" name="description">
                </textarea>
            </div>        
            <label for="color">
                Color
            </label>
            <div id="colors">
                <input type="button" name="color" value="" class="color color-red" data-color = "red"></input>
                <input type="button" name="color" value="" class="color color-blue" data-color = "blue"></input>
                <input type="button" name="color" value="" class="color color-green" data-color = "green"></input>
                <input type="button" name="color" value="" class="color color-orange" data-color = "orange"></input>
            </div>      
            <div id="eventControls">
                <input type="submit" value="Submit" class="button" id="submitButton">
                <input type="button" value="Cancel" class="button" id="cancelButton">
                <input type="button" value="Copy" class="button" id="copyButton">
                <input type="button" value="Delete" class="button" id="deleteButton">
            </div>
            
            <div id="errors">    
            </div>
            
        </form>

        <div id="myModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
              <div class="modal-header">
                <h2>Account</h2>
              </div>
                <div class="fcontainer">
                    <div class="fbtn">
                        <span id="loginTabBtn">Login</span>
                        <span id="registerTabBtn">Registieren</span>
                        <hr id="Indicator">
                    </div>
                    <form id="LoginForm">
                        <input type="text" id="username" placeholder="Username" class="finput">
                        <input type="password" id="password" placeholder="Kennenwort" class="finput"></i>
                        <input type="button" onclick="getinfo()" value="Login" class="button" id="LogInBtn">  
                       
                        <br>
                        <br>
                        <a href=""> Kennenwort vergessen? </a>
                    </form>
                    <form id="RegForm">
                        <input type="text" id="newuser" placeholder="Username" class="finput">
                        <input type="email"  id="newemail" placeholder="E-mail Adresse" class="finput">
                        <input type="password" id="newpassword" placeholder="Kennenwort" class="finput">
                        <input type="button" onclick="registeruser()" value="Registieren" class="button" id="RegistierenBtn">                    
                    </form>
                </div>
            </div>
          
          </div>
        <form id="eventModalUser">
            
            <div id="errors">    
            </div>
        </form>
    </main>    

    
    <script>
        var abfrage = window.confirm("Schön das du da bist! Um diese Anwendung benuzen zu können musst du dich regestrieren in dem du auf (OK) klickst. Wenn du bereits einen Account bei uns hast, kannst du dich ganz einfach anmelden");
    
        if (abfrage == true){
            document.getElementById("myModal").style.display="block";
        }
     /* Account */
        var objpeople = [];
        
        console.log(objpeople);
        function getinfo() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            objpeople = JSON.parse(localStorage.getItem("user"));
            for(i = 0; i < objpeople.length; i++) {
                if (username == objpeople [i].username && password == objpeople[i].password) {
                    alert(username+" is logged in!!")
                    document.getElementById("myModal").style.display="none";
                    return
                }
            }
            for(i = 0; i < objpeople.length; i++) {
                if (username == objpeople [i].username && password == objpeople[i].password) {
                    alert(" falscher Username oder falsches Passwort")
                    return
                }
            }
            
        }
        function registeruser(){
            var registeruser = document.getElementById("newuser").value
            var registerpassword = document.getElementById("newpassword").value
            var registeremail    = document.getElementById("newemail").value

            var newuser = {
                username: registeruser,
                email: registeremail,
                password: registerpassword,

            }
            for(i = 0; i < objpeople.length; i++) {

                if(registeruser == objpeople [i].username){
                    alert("Dieser Name ist schon vorhanden, bitte wähle einen anderen Namen")
                    return


                }
                    if(registeremail == objpeople[i].email){
                        alert("Diese Email-Adresse ist bereits vorhanden, bitte wählen Sie einen anderen Namen")
                        return
                    }

                 if (registerpassword.length < 8){
                    alert("Das Passwort muss mindestens 8 ziffern haben")
                    return
                }
                

            }
            if(localStorage.getItem("user")==null){
                objpeople.push(newuser);
                localStorage.setItem("user",JSON.stringify(objpeople));
             }
             else
             {
                objpeople = JSON.parse(localStorage.getItem("user"));
                objpeople.push(newuser);
                localStorage.setItem("user",JSON.stringify(objpeople));
             }
            console.log(objpeople)

            document.getElementById("newuser").value="";
            document.getElementById("newpassword").value="";
            document.getElementById("newemail").value="";
        }
         </script>
    <script src="main.js" type="module"></script>
    <script src="jquery.min.js"></script>
    <script src="jquery-3.6.0.js"></script>
    <script src="jquery-ui.js"></script>

</body>
</html>